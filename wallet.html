<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/booking.css"> <!-- Reusing booking css for nice cards -->
    <style>
        .wallet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .wallet-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 25px;
            padding: 30px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: transform 0.3s ease;
        }

        .wallet-card:hover {
            transform: translateY(-5px);
        }

        .wallet-card.usd {
            background: linear-gradient(135deg, #065f46 0%, #064e3b 100%);
            border: 1px solid #10b981;
        }

        .wallet-card.syp {
            background: linear-gradient(135deg, #1e3a8a 0%, #172554 100%);
            border: 1px solid #3b82f6;
        }

        .currency-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 800;
        }

        .balance-value {
            font-size: 2.5rem;
            font-weight: 950;
            margin: 20px 0;
            letter-spacing: -1px;
        }

        .wallet-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.9rem;
            flex: 1;
            transition: background 0.3s;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tx-list {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }

        .tx-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .tx-item:last-child {
            border-bottom: none;
        }
    </style>
</head>

<body>

    <nav class="glass-nav">
        <a href="index.html" class="logo-container">
            <div class="logo-box">Ø¨</div>
            <div style="font-weight: 900; font-size: 18px;">Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</div>
        </a>
        <div class="nav-links" id="nav-menu">
            <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="doctors.html">Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</a>
            <a href="wallet.html" class="active">Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
        </div>
        <div id="nav-right"></div>
        <div class="menu-toggle" id="mobile-toggle"><span></span><span></span><span></span></div>
    </nav>

    <div class="container" style="padding-top: 40px;">

        <div class="text-center" style="margin-bottom: 40px;">
            <h1 style="font-weight: 900; font-size: 2.5rem;">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªÙˆÙØ±</h1>
            <p style="color: #64748B;">Ø¥Ø¯Ø§Ø±Ø© Ù…Ø³ØªÙ‚Ù„Ø© Ù„Ù„Ø¹Ù…Ù„Ø§Øª (Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ÙˆØ§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©)</p>
        </div>

        <div class="wallet-grid">
            <!-- USD Card -->
            <div class="wallet-card usd">
                <div class="currency-badge">USD ğŸ‡ºğŸ‡¸</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±</div>
                <div class="balance-value" id="balance-usd">$0.00</div>
                <div class="wallet-actions">
                    <button class="action-btn" onclick="requestDeposit('USD')">ğŸ“¥ Ø¥ÙŠØ¯Ø§Ø¹</button>
                    <button class="action-btn" onclick="requestWithdraw('USD')">ğŸ“¤ Ø³Ø­Ø¨</button>
                </div>
            </div>

            <!-- SYP Card -->
            <div class="wallet-card syp">
                <div class="currency-badge">SYP ğŸ‡¸ğŸ‡¾</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù„ÙŠØ±Ø©</div>
                <div class="balance-value" id="balance-syp">0 Ù„.Ø³</div>
                <div class="wallet-actions">
                    <button class="action-btn" onclick="requestDeposit('SYP')">ğŸ“¥ Ø¥ÙŠØ¯Ø§Ø¹</button>
                    <button class="action-btn" onclick="requestWithdraw('SYP')">ğŸ“¤ Ø³Ø­Ø¨</button>
                </div>
            </div>
        </div>

        <div class="grid grid-2">
            <div class="tx-list">
                <h3 style="font-weight: 900; margin-bottom: 20px;">Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (USD) ğŸ‡ºğŸ‡¸</h3>
                <div id="tx-usd-list">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª</div>
            </div>
            <div class="tx-list">
                <h3 style="font-weight: 900; margin-bottom: 20px;">Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (SYP) ğŸ‡¸ğŸ‡¾</h3>
                <div id="tx-syp-list">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª</div>
            </div>
        </div>

    </div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (!Store.user) {
                window.location.href = 'login.html';
                return;
            }
            renderWallet();
        });

        function renderWallet() {
            // Update Balances
            document.getElementById('balance-usd').innerText = `$${(Store.user.walletUSD || 0).toLocaleString()}`;
            document.getElementById('balance-syp').innerText = `${(Store.user.walletSYP || 0).toLocaleString()} Ù„.Ø³`;

            // Tx Lists
            const txs = Store.getData('transactions') || [];
            const usdTx = txs.filter(t => t.userPhone === Store.user.phone && t.currency === 'USD');
            const sypTx = txs.filter(t => t.userPhone === Store.user.phone && t.currency === 'SYP');

            renderList('tx-usd-list', usdTx, '$');
            renderList('tx-syp-list', sypTx, ' Ù„.Ø³');
        }

        function renderList(elId, list, symbol) {
            const el = document.getElementById(elId);
            if (list.length === 0) {
                el.innerHTML = '<p style="color:#cbd5e1; text-align:center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª</p>';
                return;
            }
            el.innerHTML = list.slice(0, 5).map(tx => `
                <div class="tx-item">
                    <div>
                        <div style="font-weight:700; font-size:0.9rem;">${tx.title}</div>
                        <div style="font-size:0.75rem; color:#94a3b8;">${tx.date}</div>
                    </div>
                    <div style="font-weight:800; color:${tx.amount > 0 ? '#16a34a' : '#ef4444'};">
                        ${tx.amount > 0 ? '+' : ''}${tx.amount.toLocaleString()}${symbol}
                    </div>
                </div>
            `).join('');
        }

        function requestDeposit(currency) {
            alert(`Ù„Ø´Ø­Ù† Ø±ØµÙŠØ¯ ${currency}ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£Ø­Ø¯ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ† Ø£Ùˆ Ø²ÙŠØ§Ø±Ø© Ù…ÙƒØªØ¨Ù†Ø§.`);
        }

        function requestWithdraw(currency) {
            alert("Ø®Ø¯Ù…Ø© Ø§Ù„Ø³Ø­Ø¨ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ ÙÙ‚Ø·.");
        }
    </script>
</body>

</html>